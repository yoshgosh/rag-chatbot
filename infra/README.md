# infra
Azure リソースを Bicep で定義しています。

## 命名規則
- 以下に示すサービスとリソースの関係性が命名の前提となります。
    ```
    サービス : リソース = 1 : n
    ```
    - 例
        - chat-web サービスには、Azure Static Web Apps リソースが含まれます。
        - chat-api サービスには、Azure Functions リソース、Storage Account リソース、Application Insights リソースなど複数のリソースが含まれます。
        - search サービスには、Azure AI Search リソースが含まれます。

- リソースの命名では、リソースの論理名とは別に「リソース呼称」を定義し、これを基に各種命名規則を構成します。
    - 論理名
        - `論理名 = <リソース種別の短縮系> + <組織名> + <プロジェクト名> + <サービス名> + <環境名> + <リージョン名>`
            - リソースが性質上プロジェクト内で単一である場合、`<サービス名>` は省略を許容する。
            - `<サービス名>` は短縮の必要がある場合、短縮形を許容する。
                - 短縮の度合いは自由とする。
    - リソース呼称
        - `リソース呼称 = <サービス名> + <リソース種別>`
            - リソースが性質上プロジェクト内で単一である場合、`<サービス名>` は省略を許容する。
            - `<リソース種別>` は短縮の必要がある場合、短縮形を許容する。
                - 短縮の度合いは自由とする。

- 各種命名規則
    - Bicep
        - `Bicep 内変数名 = <リソース呼称> ( + <役割>)`
    - GitHub Actions workflow
        - `GitHub Actions workflow 内変数名 = AZURE + <リソース呼称> + <役割>`
    - 各サービスの環境変数名
        - `各サービスの環境変数名（アプリ）= AZURE + <リソース呼称> + <役割>`
        - `各サービスの環境変数名（インフラ） = 自由`